# 📕 Chapter 04 CPU의 작동 원리

## ✅ 04-1 ALU와 제어장치

### 📌 ALU

- `ALU` : 계산을 하는 부품
- 계산을 위해 `연산`과 `피연산자`가 필요
- 연산 결과는 숫자나 문자, 주소가 될 수도 있음
- 연산 결과는 메모리가 아닌 레지스터에 저장
  - CPU가 메모리에 접근하는 속도 > 레지스터에 접근하는 속도

<blockQuote>ALU가 받아들이는 정보</blockQuote>

- 레지스터 ➡️ ALU : 피연산자
- 제어장치 ➡️ ALU : 제어신호(수행할 연산)

<blockQuote>ALU가 내보내는 정보</blockQuote>

- ALU ➡️ 레지스터 : 연산의 결괏값
- ALU ➡️ 플래그 레지스터 : 플래그
  - 연산 결과에 대한 추가적인 정보를 플래그로 내보냄
  - 부호 플래그, 제로 플래그, 캐리 플래그, 오버플로우 플래그, 인터럽트 플래그

### 📌 제어장치

- `제어장치` : 제어신호를 내보내고, 명령어를 해석하는 부품
- `제어신호` : 컴퓨터 부품들을 작동시키기 위한 전기 신호

<blockQuote>제어장치가 받아들이는 정보</blockQuote>

- `클럭` : 컴퓨터의 부품이 움직이는 시간 단위
- 명령어 레지스터 ➡️ 제어장치 : 명령어
- 플러그 레지스터 ➡️ 제어장치 : 플러그
- CPU 외부 ➡️ 시스템 버스(제어 버스) ➡️ 제어 장치 : 제어 신호

<blockQuote>제어장치가 내보내는 정보</blockQuote>

- CPU 외부로 전달하는 제어신호
  - 제어장치 ➡️ 시스템 버스(제어 버스) ➡️ 메모리
  - 제어장치 ➡️ 시스템 버스(제어 버스) ➡️ 입출력장치
- CPU 내부로 전달하는 제어신호
  - 제어장치 ➡️ ALU : 수행할 연산 지시
  - 제어장치 ➡️ 레지스터 : 레지스터 간 데이터 이동 또는 레지스터에 저장된 명령어 해석

## ✅ 04-2 레지스터

### 📌 반드시 알아야 할 레지스터

- [프로그램 카운터](#-프로그램-카운터)
- [명령어 레지스터](#-명령어-레지스터)
- [메모리 주소 레지스터](#-메모리-주소-레지스터)
- [메모리 버퍼 레지스터](#-메모리-버퍼-레지스터)
- [플래그 레지스터](#-플래그-레지스터)
- [범용 레지스터](#-범용-레지스터)
- [스택 포인터](#-스택-포인터)
- [베이스 레지스터](#-베이스-레지스터)

### 🔍 프로그램 카운터

- 메모리에서 읽어들일 명령어의 주소 저장
- `명령어 포인터` 라고도 함
- 일반적으로 꾸준히 증가하며 프로그램을 차례로 실행
- 특정 메모리 주소로 실행 흐름을 이동하는 명령어가 실행되면 변경된 주소가 저장됨
- 인터럽트가 발생해도 실행 흐름이 끊어짐
- 주소 지정 방식에 사용됨
- 변위 주소 지정 방식에 사용

### 🔍 명령어 레지스터

- 메모리에서 읽어들인 명령어를 저장
- 명령어 레지스터 속 명령어 → 제어장치 → 제어신호

### 🔍 메모리 주소 레지스터

- 메모리의 주소를 저장
- CPU가 읽고자 하는 주소 값을 주소 버스로 보낼 때 거침

### 🔍 메모리 버퍼 레지스터

- 메모리와 주고 받을 값(명령어, 데이타)를 저장
- 메모리에 쓰고 싶은 값이나 메모리로부터 전달받은 값
- 데이터 버스로 주고 받을 값이 거침
- `메모리 데이터 레지스터` 라고도 함

### 🔍 플래그 레지스터

- ALU 연산 결과에 따른 플ㄹ래그 저장
- 연산 결과 또는 CPU 상태에 대한 부가적인 정보 저장

### 🔍 범용 레지스터

- 다양하고 일반적인 상황에서 자유롭게 사용
- 데이터와 주소 모두 저장 가능

### 🔍 스택 포인터

- 스택 주소 지정 방식에 사용됨

### 🔍 베이스 레지스터

- 변위 주소 지정 방식에 사용됨

### 📌 특정 레지스터를 이용한 주소 지정 방식

레지스터를 사용하는 명령어의 주소 지정 방식

### 🔍 스택 주소 지정 방식

- 스택과 스택 포인터를 이용
- `스택`: 한쪽 끝이 막혀있는 통과 같은 저장 공간, 가장 최근 저장 값부터 꺼냄
- **`스택 포인터`** : 스택의 꼭대기를 가리킴, 스택에 마지막으로 저장한 값의 위치를 저장하는 레지스터
- `스택 영역` : 메모리 안에 스택처럼 사용하도록 정해진 영역

### 🔍 변위 주소 지정 방식

- **오퍼랜드 필드의 값**(변위)와 **특정 레지스터의 값을 더하여** 유효 주소를 얻어내는 방식
- `연산코드` + `레지스터 필드` + `오퍼랜드 필드`
- 어떤 레지스터를 더하는지에 따라 `상대 주소 지정 방식`, `베이스 레지스터 주소 지정 방식` 등

<blockQuote>상대 주소 지정 방식</blockQuote>

- 오퍼랜드와 프로그램 카운터의 값을 더하여 유효주소를 얻는 방식
- 모든 코드를 실행하는 것이 아닌, 분기하여 특정 주소의 코드를 실행할 때 사용

<blockQuote>베이스 레지스터 주소 지정 방식</blockQuote>

- 오퍼랜드와 베이스 레지스터의 값을 더하여 유효주소를 얻는 방식
- `베이스 레지스터` = 기준 주소 역할
- `오퍼랜드` = 기준 주소로부터 떨어진 거리로서 역할
- 기준 주소로부터 얼마나 떨어져있는 주소에 접근할 것인지를 연산
