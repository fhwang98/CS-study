# 📕 Chapter 07 보조기억장치

## ✅ 07-1 다양한 보조기억장치

### 📌 플래시 메모리

- USB 메모리, SD 카드, SSD 등
- 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치
- 보조기억장치 뿐만 아니라 다양한 곳에서 널리 사용
- `셀` : 플래시 메모리에서 데이터를 저장하는 가장 작은 단위
- 한 셀에 몇 비트를 저장할 수 있느냐에 따라 플래시 메모리 종류가 나뉨
  - [`SLC(Single Level Cell)`](#-slc-타입) : 한 셀에 1비트를 저장할 수 있는 플래시 메모리
  - [`MLC(Multiple Level Cell)`](#-mlc-타입) : 한 셀에 2비트를 저장할 수 있는 플래시 메모리
  - [`TLC(Triple Level Cell)`](#-tlc-타입) : 한 셀에 3비트를 저장할 수 있는 플래시 메모리
- `페이지` : 셀들이 모여 만들어진 단위
  - 플래시 메모리의 **읽기와 쓰기 단위**
  - `Free 상태` : 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
  - `Valid 상태` : 이미 유효한 데이터를 저장하고 있는 상태
  - 플래시 메모리는 **덮어쓰기 불가능**
  - Valid 상태의 페이지에는 새 데이터 저장할 수 없음
  - `Invalid 상태` : 쓰레기값(유효하지 않은 데이터)을 저장하고 있는 상태
- `블록` : 페이지가 모여 만들어진 단위
  - 플레시 메모리의 **삭제 단위**
- `플레인` : 블록이 모여 만들어진 단위
- `다이` : 플레인이 모여 만들어진 단위
- `가비지 컬렉션` : 유효한 페이지들만 새로운 블록으로 복사한 후 기존 블록을 삭제하여 공간을 정리하는 기능

### 🔖 두 종류의 플래시 메모리

- **`NAND 플래시 메모리`**
  - NAND 연산을 수행하는 회로(NAND 게이트) 기반의 메모리
  - 대용량 저장 장치로 많이 사용 됨
  - 책에서 말하는 플래시 메모리
- **`NOR 플래시 메모리`**
  - NOR 연산을 수행하는 회로(NOR 게이트) 기반의 메모리

### 🔖 플래시 메모리도 수명이 있나요?

네.

한 셀에 일정 횟수 이 상 데이터를 쓰고 지우면 그 셀은 더 이상 데이터를 저장할 수 없음

### 🔍 SLC 타입

- 셀당 1비트 저장
- 한 셀로 두 개의 정보 표현
- 빠른 입출력
- 수명 길다
- 용량 대비 가격이 높다
- 데이터 읽고 쓰기가 매우 많이 반복되며 고성능의 빠른 저장 장치가 필요한 경우 사용

### 🔍 MLC 타입

- 셀당 2비트 저장
- 한 셀로 네 개의 정보 표현
- SLC 타입보다 속도와 수명은 떨어짐
- 한 셀에 두 비트씩 저장할 수 있어 SLC 타입보다 대용화에 유리
- SLC 타입 보다 용량 대비 가격이 저렴

### 🔍 TLC 타입

- 셀당 3비트 저장
- 한 셀로 여덟 개의 정보 표현
- 대용화에 유리
- SLC, MLC 타입 보다 수명과 속도는 떨어지지만 용량 대비 가격이 저렴

### 😃 SLC vs MLC vs TLC

어떻게 선택해야 할까?

- 데이터를 자주 썼다 지우거나, 고성능을 원한다면? ➡️ SLC
- 저가의 대용량 저장 장치를 원한다면? ➡️ TLC
- 그 중간을 원한다 ➡️ MLC

| 구분               | SLC    | MLC  | TLC    |
| ------------------ | ------ | ---- | ------ |
| **셀당 bit**       | 1bit   | 2bit | 3bit   |
| **수명**           | 길다   | 보통 | 짧다   |
| **읽기/쓰기 속도** | 빠르다 | 보통 | 느리다 |
| **용량 대비 가격** | 높다   | 보통 | 낮다   |

## ✅ 07-2 RAID의 정의와 종류

### 📌 RAID의 정의

- Redundant Array of Independent Disks
- 주로 하드디스크나 SSD 사용
- 데이터의 안정성 / 성능을 높이기 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술

### 📌 RAID의 종류

- RAID의 구성 방법은 여러 가지가 있고 이를 `RAID 레벨` 이라 표현
- RAID 0, RAID 1, RAID 2, RAID 3, RAID 4, RAID 5, RAID 6
  - RAID 2, RAID 3 잘 안씀
- RAID 10, RAID 50

### 🔍 RAID 0

- 여러개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식
- `스트라입` : 줄무늬처럼 분산되어 저장된 데이터
- `스트라이핑` : 분산하여 저장하는 것
- 스트라이핑하면 저장된 데이터를 읽고 쓰는 속도가 빨라짐
- 단점 : 저장된 정보가 안전하지 않다
  - 하드디스크 중 하나에 문제 생기면 다른 모든 하드 디스크의 정보를 읽는데 문제가 생김

### 🔍 RAID 1

- 복사본을 만드는 방식 ➡️ `미러링`이라고도 함
- RAID 0 과 마찬가지로 데이터 스트라이핑 사용
- 원본과 복사본 모두에 데이터 저장 ➡️ RAID 0보다 속도는 느림
- 장점 : 복구가 매우 간단하다
- 단점 : 하드 디스크 개수가 한정되었을 떄 사용 가능한 용량이 적어짐
  - 많은 양의 하드 디스크가 필요, 비용이 증가

### 🔍 RAID 4

- 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 둠
- `패리티 비트` : 오류를 검출하고 복구하기 위한 정보
- 패리티를 저장한 장치를 이용해 다른 장치들의 오류 검출 ➡️ 오류가 있다면 복구
- RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관할 수 있음

### 🔖 오류를 검출하는 패리티 비트

1. RAID 4에서는 패리티 정보를 저장한 장치로 나머지 장치들의 오류를 검출 및 복구한다.
2. 패리티 비트는 본래 오류 검출용 정보지만, RAID에서틑 오류 복구도 가능하다.

### 🔍 RAID 5

- RAID 4에서는 새로운 데이터가 저장될 때마다 패리지를 저장하는 디스크에도 데이터를 쓰게 되므로 패리티 저장 장치에 병목 현상 발생
- 병목현상 해소를 위해 **패리티 정보를 분산하여 저장**

### 🔍 RAID 6

- 서로 다른 두 개의 패리티를 두는 방식
- 오류 검출 및 복구 수 댄이 두 개
- RAID 4나 RAID 5보다 안전
- 새로운 저장할 때마다 저장할 패리티가 두 개이므로 쓰가 속도는 RAID보다 느림
- 저장 속도 ⬇ 보관 안전 ⬆

### 🔍 ...

- `Nested RAID` : 여러 RAID 레벨을 혼합한 방식
- RAID 10 : RAID 0과 RAID 1 혼합
- RAID 50 : RAID 0과 RAID 5 혼합

# 📕 Chapter 08 입출력장치

## ✅ 08-1 장치 컨트롤러와 장치 드라이버

### 📌 장치 컨트롤러

    입출력 장치가 다루기 까다로운 이유 ?

    - 입출력 장치의 종류 매우 다양함
    	- 다양한 입출력장치와 정보를 주고받는 방식을 규격화하기 어려움

    - 일반적으로 CPU나 메모리의 데이터 전송률은 높지만 입출력 장치의 데이터 전송률 낮다
    	- `전송률` : 데이터를 얼마나 빨리 교환할 수 있는지를 나타내는 지표
    	- 전송률의 차이로 인해 CPU와 메모리 ↔️ 입출력장치 간 통신 어려움

- `장치 컨트롤러` : 위의 이유로 입출력장치는 컴퓨터에 직접 연결되지 않고 장치 컨트롤러에 연걸
  - `입출력 제어기`, `입출력 모둘` 로도 불림
- 장치 컨트롤러의 역할
  - CPU와 입출력장치 간의 통신 중개
  - 오류 검출
  - `데이터 버퍼링`
    - `버퍼링` : 전송률이 높은 장치와 낮은 장치 사이에 주고받는 데이터를 `버퍼`라는 임시 저장 공간에 조금씩 모았다가 한꺼번에 내보내거나, 데이터를 한 번에 많이 받아 조금씩 내보내는 방법
    - CPU와 입출력장치 사이의 전송률 완화
- 장치 컨트롤러의 구성요소

  - `데이터 레지스터`
    - CPU와 입출력장치 사이에 주고받을 데이터가 담기는 레지스터
    - 버퍼 역할
  - `상태 레지스터` : 입출력 작업을 할 준비가 되었는지, 작업이 완료되었는지, 오류는 없는지 등 상태 정보 저장
  - `제어 레지스터` : 입출력장치가 수행할 내용에 대한 제어 정보와 명령 저장

### 📌 장치 드라이버

- 장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 **프로그램**
- 운영체제(OS)가 연결된 장치의 드라이버를 인식하고 실행할 수 있다면 어떤 장치든 컴퓨터 내부와 정보를 주고받을 수 있음
- 장치 드라이버를 인식하거나 실행할 수 없다면 컴퓨터 내부와 정보를 주고받을 수 없음

## ✅ 08-2 다양한 입출력 방법

### 📌 프로그램 입출력

- 프로그램 속 명령어로 입출력장치를 제어하는 방법
- 프로그램 입출력 방식에서의 입출력 작업은 CPU가 장치 컨트롤러의 레지스터 값을 읽고 씀으로써 이루어짐
- CPU가 장치 컨트롤러의 레지스터를 알게 하는 방식
  - [메모리 맵 입출력](#-메모리-맵-입출력)
  - [고립형 입출력](#-고립형-입출력)

### 🔍 메모리 맵 입출력

- 메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소 공간을 하나의 주소 공간으로 간주하는 입출력 방식
- 반은 메모리를 위한 공간, 반은 입출력장치를 위한 공간 .. 나눠서 사용
- 메모리의 주소나 장치 컨트롤러의 레지스터나 똑같이 메모리 주소 대하듯 대함
- 접근 명령어가 다를 필요 없음

### 🔍 고립형 입출력

- 메모리를 위한 주소 공간과 입출력장치를 위한 주소 공간을 분리하는 방법
- 메모리 주소 공간과 입출력장치의 주소 공간이 개별로 존재
- 메모리에 접근할 때와 입출력장치에 접근할 떄 다른 입출력 명령어 사용

### 😀 메모리 맵 입출력 vs 고립형 입출력

| 메모리 맵 입출력                            | 고립형 입출력                               |
| ------------------------------------------- | ------------------------------------------- |
| 메모리와 입출력장치는 같은 주소 공간 사용   | 메모리와 입출력장치는 분리된 주소 공간 사용 |
| 메모리 주소 공간이 축소됨                   | 메모리주소 공간이 축소되지 않음             |
| 메모리와 입출력장치에 같은 명령어 사용 가능 | 입출력 전용 명령어 사용                     |

### 📌 인터럽트 기반 입출력
